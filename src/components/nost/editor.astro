---
const { content } = Astro.props;
---

<div id="editor" contenteditable="" set:html={content} />

<style>
	#editor {
		display: block;
		position: relative;
		margin: 1rem 0 calc(1rem + var(--action-strip-height));
		min-height: calc(100dvh - 2rem - var(--action-strip-height));
		outline: none;
	}
</style>

<script>
	import insertTextAtCursor from "src/lib/utilities/insert-text-at-cursor";

	const editor = document.getElementById("editor") as HTMLDivElement;
	editor.addEventListener("paste", (event) => {
		event.preventDefault();
		const text = event.clipboardData?.getData("text/plain");
		if (text) {
			insertTextAtCursor(text);
		}
	});
</script>
